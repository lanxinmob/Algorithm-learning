# 最短路径算法总结

---

## **1. Floyd-Warshall 算法**
- **用途**：所有点对最短路径（APSP）
- **时间复杂度**：`O(n³)`
- **空间复杂度**：`O(n²)`（邻接矩阵）
- **特点**：
  - 基于动态规划，三重循环遍历所有中间节点。
  - 支持负权边，**不能有负权环**。
  - 适合稠密图或小规模图。
- **优化**：无队列优化（传统实现）。

---

## **2. Dijkstra 算法**
- **用途**：单源最短路径（SSSP）
- **时间复杂度**：
  - 原始版本：`O(n²)`（邻接矩阵）
  - **堆优化**：`O(m log n)`（优先队列，如二叉堆）
- **空间复杂度**：`O(m + n)`（邻接表）
- **特点**：
  - 贪心策略，每次选择当前最短路径的节点。
  - **不支持负权边**。
  - 适合正权图，堆优化适合稀疏图。

---

## **3. Bellman-Ford 算法**
- **用途**：单源最短路径（SSSP）
- **时间复杂度**：`O(n·m)`
- **空间复杂度**：`O(m)`（邻接表）
- **特点**：
  - 松弛所有边 `n-1` 轮，可检测负权环。
  - 支持负权边，但效率低。
  - **邻接表实现**是标准方式，空间更优。

---

## **4. SPFA（Shortest Path Faster Algorithm）**
- **用途**：单源最短路径（SSSP）
- **时间复杂度**：
  - 平均：`O(m)`
  - 最坏：`O(n·m)`（与 Bellman-Ford 相同）
- **空间复杂度**：`O(m + n)`
- **特点**：
  - Bellman-Ford 的队列优化版，用队列减少冗余松弛。
  - 支持负权边，可检测负权环。
  - **优化方法**：
    - SLF（Small Label First）：双端队列插入优化。
    - LLL（Large Label Last）：出队时跳过距离大的节点。

---

## **对比表格**
| 算法               | 类型   | 时间复杂度      | 空间复杂度    | 负权边 | 负权环检测 | 适用场景                |
|--------------------|--------|-----------------|---------------|--------|------------|-------------------------|
| Floyd-Warshall     | APSP   | `O(n³)`        | `O(n²)`       | 支持   | 不支持     | 小规模图/所有点对       |
| Dijkstra（原始）   | SSSP   | `O(n²)`        | `O(n²)`       | 不支持 | 不支持     | 稠密正权图              |
| Dijkstra（堆优化） | SSSP   | `O(m log n)`   | `O(m + n)`    | 不支持 | 不支持     | 稀疏正权图              |
| Bellman-Ford       | SSSP   | `O(n·m)`       | `O(m + n)`    | 支持   | 支持       | 含负权边或需检测负环    |
| SPFA               | SSSP   | 平均 `O(m)`    | `O(m + n)`    | 支持   | 支持       | 含负权边，多数情况更快  |

---

## **关键区别**
1. **负权处理**：
   - Dijkstra 仅限正权边，其他算法支持负权边。
   - Bellman-Ford 和 SPFA 可检测负权环。
2. **时间复杂度**：
   - Dijkstra（堆优化）适合稀疏图，SPFA 在平均情况下最快。
   - Floyd-Warshall 适合所有点对但复杂度高。
3. **实现方式**：
   - Dijkstra 用优先队列优化，SPFA 用普通队列或双端队列优化。

---

## **常见误解**
- **Floyd 队列优化**：传统 Floyd 算法没有队列优化，用户可能混淆了 SPFA 与 Bellman-Ford 的关系。
- **邻接表 vs 邻接矩阵**：Bellman-Ford 和 SPFA 多用邻接表节省空间，Floyd 必须用邻接矩阵。

---

## **使用建议**
- **正权图**：优先选择 Dijkstra（堆优化）。
- **含负权边**：使用 SPFA 或 Bellman-Ford。
- **小规模图/所有点对**：选择 Floyd-Warshall。